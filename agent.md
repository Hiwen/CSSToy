# CSSToy 

这是一个CSS玩具类小项目。
我希望它能帮助人们学习、研究和分享CSS的各种技巧和效果;
同时也能列举出一些常用的CSS效果的代码段和实际页面效果。

用户可以注册账号，登录后可以上传自己的CSS代码段和页面效果。
其他用户可以查看、点赞、评论这些代码段和效果，也可以收藏自己喜欢的代码段。

系统每周会评审出最受欢迎的CSS效果列表，展示在首页。
用户也可以在首页查看最新上传的CSS代码段和效果。

还要支持给CSS添加标签，支持CSS的搜索和预览功能。
用户可以根据标签查看相关的CSS代码段和效果，也可以根据关键词搜索自己感兴趣的CSS代码段。

## 安全机制

### CSS代码执行安全
- 对用户提交的CSS代码进行安全过滤，防止恶意代码和XSS攻击
- 限制CSS中使用的危险属性和值，如expression()、javascript:协议等
- 在沙箱环境中执行和预览CSS代码

### 用户认证安全
- 密码使用bcrypt或Argon2进行加密存储
- 使用JWT (JSON Web Token)进行身份验证，设置合理的过期时间
- 实现token刷新机制，支持自动续期
- 敏感操作（如修改密码）需要二次验证

### 访问权限控制
- 普通用户：上传、查看、点赞、收藏、评论CSS代码段
- 管理员：内容审核、用户管理、系统配置
- 确保用户只能操作自己的资源（编辑/删除自己的代码段等）

## 数据模型设计

### 核心实体
- **用户(User)**：id、用户名、邮箱、密码(加密)、头像、注册时间、最后登录时间、角色
- **CSS代码段(CSSnippet)**：id、标题、描述、代码内容、创建者ID、创建时间、更新时间、点赞数、收藏数、评论数、状态
- **标签(Tag)**：id、名称、使用次数
- **CSS-标签关联(CSSnippetTag)**：cssnippet_id、tag_id
- **点赞(Like)**：id、user_id、cssnippet_id、创建时间
- **收藏(Collection)**：id、user_id、cssnippet_id、创建时间
- **评论(Comment)**：id、user_id、cssnippet_id、内容、创建时间、父评论ID(支持回复)

## 技术栈

### 后台

使用 Node.js 作为服务器端框架，使用 Express 框架快速搭建 RESTful API 接口。
数据库使用 SQLite 存储用户信息、CSS 代码段、页面效果、标签、点赞、评论、收藏等数据。

### 前端

使用Vue框架作为前端框架，使用Vue Router进行路由管理，使用Vuex进行状态管理。
前端页面包括首页、登录注册页、CSS编辑预览页、搜索页等。

页面的左上角始终置顶展示搜索功能，右上角始终置顶展示登录注册按钮或者用户的名和头像。

#### 首页

默认展示系统每周评审出的最受欢迎的CSS效果列表。
用户也可以在首页切换查看最新上传的CSS代码段和效果。
两种列表的格式相同，为CSS的效果预览，每个预览包括CSS代码的实际效果、点赞数、收藏数、评论数等。
用户未登录时，默认展示首页。
在首页的右上角有登录注册按钮，点击后会跳转到登录注册页。

**每周热门算法**：基于过去7天内的综合得分，计算公式为：点赞数×0.5 + 收藏数×0.3 + 评论数×0.2。每日凌晨4点更新热门列表。

#### 登录注册页

**注册功能**：
- 支持邮箱注册，必填字段：用户名、邮箱、密码、确认密码
- 邮箱格式验证和唯一性检查
- 密码强度检测（至少8位，包含字母和数字）
- 注册成功后自动登录并跳转首页
- 注册时可以设置找回密码问题和答案，用于后续密码重置

**登录功能**：
- 支持邮箱和密码登录
- 记住登录状态（可选）
- 登录失败次数限制，防止暴力破解
- 提供忘记密码功能

登录后，用户可以在首页查看自己上传的CSS代码段和效果，也可以在其他用户的页面查看点赞、收藏、评论等信息。
登录之后，用户可以在首页的右上角，展示自己的用户名和头像。
点击头像，会跳转到个人中心页面。

#### CSS编辑预览页

CSS的编辑预览页面包括四个部分：
1. 左侧CSS的代码片段，需要支持CSS的语法高亮和自动补全
2. 右上侧HTML结构编辑区，允许用户自定义HTML结构以配合CSS预览
3. 中上侧预览区域，实时展示CSS代码的实际效果
4. 右下评论区域，用户可以在评论中分享自己的想法和问题，支持评论回复功能

**标签管理**：支持用户上传CSS代码段和页面效果时，添加多个标签。系统提供推荐标签列表，也支持用户输入自定义标签。

**代码限制**：CSS代码段最大长度为10,000字符，HTML结构最大长度为5,000字符。

**版本管理**：每次保存代码时自动创建版本记录，用户可以查看和恢复历史版本。

#### 搜索页

在每个页面的左上角，置顶搜索框，用户可以在搜索框中输入关键词搜索CSS代码段和效果。
搜索结果展示在下方，格式与首页相同，为CSS的效果预览。
用户可以点击搜索结果跳转到对应的CSS编辑预览页。

**高级搜索**：
- 支持按发布时间、点赞数等过滤搜索结果
- 提供搜索建议和自动补全功能
- 支持精确搜索（使用引号）和排除搜索（使用减号）

**标签筛选**：
- 搜索也可以根据流行的标签，快速筛选出相关的CSS代码段和效果
- 流行的标签由后台系统自动统计并展示在搜索页的侧边栏
- 用户可以点击标签快速筛选出相关的CSS代码段和效果
- 支持根据多个标签筛选CSS代码段和效果

**搜索结果分页**：每页显示12个搜索结果，支持翻页和无限滚动加载。

#### 个人中心页面

用户登录后，会展示自己的个人中心页面。
个人中心页面包括用户的基本信息、上传的CSS代码段和效果、点赞的CSS代码段和效果、收藏的CSS代码段和效果、评论的CSS代码段和效果等。

**用户信息管理**：
- 用户可以在个人中心页面修改自己的基本信息（用户名、头像）
- 可以修改密码，需要验证旧密码

**我的上传**：
- 支持用户在个人中心页面查看和管理自己上传的CSS代码段和效果。包括代码、页面效果、标签、点赞数、收藏数、评论数等
- 用户也可以在个人中心页面单击列表中的一项，跳转到 CSS编辑预览页 修改自己上传的CSS代码段和效果的信息，包括代码、页面效果、标签等
- 用户可以在个人中心页面删除自己上传的CSS代码段和效果

**我的点赞/收藏/评论**：
- 展示用户点赞、收藏和评论过的CSS代码段列表
- 支持取消点赞、取消收藏操作
- 支持删除自己的评论

## 用户体验优化

### 响应式设计
- 确保在桌面、平板和移动设备上都有良好的用户体验
- 根据屏幕尺寸自动调整布局和组件大小
- 优化触摸操作，提升移动端使用体验

### 性能优化
- 实现CSS代码段的懒加载
- 使用缓存机制减少服务器请求
- 优化图片和资源加载速度
- 实现搜索结果的分页或无限滚动

### 错误处理和用户反馈
- 提供友好的错误提示和操作反馈
- 表单验证错误实时显示
- 加载状态显示（如骨架屏）
- 操作成功/失败的消息通知

## 技术实现细节

### 数据库管理
- 实现SQLite数据库的定期备份方案
- 使用连接池管理数据库连接
- 数据库索引优化，提升查询性能

### API设计
- RESTful API详细规范
- 统一的响应格式和错误处理
- API文档生成和维护计划
- API版本控制策略

### 前端开发规范
- 使用ESLint和Prettier保证代码质量
- 组件化开发，提高代码复用性
- 自动化测试策略（单元测试、集成测试）
- 构建和部署流程标准化


## 部署和运维

### 环境配置
- 开发环境、测试环境和生产环境配置隔离
- 环境变量管理，避免硬编码敏感信息

### 监控和日志
- 关键操作日志记录
- 错误日志收集和分析
- 系统性能监控

以上是1.0版本的主要功能。如果后续有新的功能需求，会根据实际情况进行添加。并标注相应的版本号。

## 2.0版本功能

### 用户注册
- 注册时需要填写邮箱验证码，以验证邮箱的归属


### 内容审核
- 实现CSS代码的自动化安全扫描
- 管理员人工审核机制
- 社区举报功能


